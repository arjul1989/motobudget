{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/jules/Moto_Budget/app/motos/new/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSession } from \"next-auth/react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\n\nexport default function NewMotoPage() {\n    const { data: session } = useSession();\n    const router = useRouter();\n    const [submitting, setSubmitting] = useState(false);\n\n    // Form State\n    const [formData, setFormData] = useState({\n        brand: \"\",\n        model: \"\",\n        year: new Date().getFullYear(),\n        plate: \"\",\n        purchaseDate: new Date().toISOString().split('T')[0],\n        purchaseCostEstimated: \"\",\n        laborCostEstimated: \"\",\n        partsCostEstimated: \"\"\n    });\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setSubmitting(true);\n\n        const payload = {\n            ...formData,\n            purchaseCostEstimated: parseFloat(formData.purchaseCostEstimated || \"0\"),\n            laborCostEstimated: parseFloat(formData.laborCostEstimated || \"0\"),\n            parts: parseFloat(formData.partsCostEstimated || \"0\") > 0 ? [{\n                name: \"Repuestos Estimados\",\n                estimated: parseFloat(formData.partsCostEstimated || \"0\"),\n                real: 0\n            }] : [],\n            year: parseInt(formData.year.toString())\n        };\n\n        try {\n            const res = await fetch('/api/motos', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(payload)\n            });\n\n            if (res.ok) {\n                router.push('/dashboard');\n            } else {\n                alert(\"Error al crear la moto\");\n            }\n        } catch (error) {\n            console.error(error);\n            alert(\"Error de conexión\");\n        } finally {\n            setSubmitting(false);\n        }\n    };\n\n    return (\n        <main className=\"bg-background-light dark:bg-background-dark text-slate-900 dark:text-white min-h-screen font-display selection:bg-primary selection:text-black\">\n            {/* Header */}\n            <div className=\"sticky top-0 z-50 flex items-center bg-white/90 dark:bg-background-dark/90 backdrop-blur-md p-4 border-b border-gray-200 dark:border-white/5 max-w-3xl mx-auto w-full\">\n                <Link href=\"/dashboard\">\n                    <button className=\"text-slate-900 dark:text-white hover:text-primary transition-colors flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/5\">\n                        <span className=\"material-symbols-outlined text-2xl\">arrow_back</span>\n                    </button>\n                </Link>\n                <h2 className=\"ml-4 text-lg font-bold leading-tight tracking-tight flex-1\">Nueva Moto</h2>\n            </div>\n\n            <div className=\"max-w-3xl mx-auto p-6\">\n                <form onSubmit={handleSubmit} className=\"flex flex-col gap-6\">\n\n                    {/* Section: Basic Info */}\n                    <div className=\"space-y-4\">\n                        <h3 className=\"text-sm font-bold uppercase tracking-wider text-gray-400 border-b border-gray-200 dark:border-gray-800 pb-2\">Información de la Moto</h3>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div className=\"flex flex-col gap-1\">\n                                <label className=\"text-xs font-bold uppercase text-gray-500\">Marca</label>\n                                <input\n                                    name=\"brand\"\n                                    required\n                                    className=\"h-12 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-surface-dark px-4 font-medium outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all text-slate-900 dark:text-white\"\n                                    placeholder=\"Ej: Yamaha\"\n                                    value={formData.brand}\n                                    onChange={handleChange}\n                                />\n                            </div>\n                            <div className=\"flex flex-col gap-1\">\n                                <label className=\"text-xs font-bold uppercase text-gray-500\">Modelo</label>\n                                <input\n                                    name=\"model\"\n                                    required\n                                    className=\"h-12 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-surface-dark px-4 font-medium outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all text-slate-900 dark:text-white\"\n                                    placeholder=\"Ej: DT 125\"\n                                    value={formData.model}\n                                    onChange={handleChange}\n                                />\n                            </div>\n                            <div className=\"flex flex-col gap-1\">\n                                <label className=\"text-xs font-bold uppercase text-gray-500\">Año</label>\n                                <input\n                                    name=\"year\"\n                                    type=\"number\"\n                                    inputMode=\"numeric\"\n                                    required\n                                    className=\"h-12 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-surface-dark px-4 font-medium outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all text-slate-900 dark:text-white\"\n                                    placeholder=\"Ej: 2005\"\n                                    value={formData.year}\n                                    onChange={handleChange}\n                                />\n                            </div>\n                            <div className=\"flex flex-col gap-1\">\n                                <label className=\"text-xs font-bold uppercase text-gray-500\">Placa (Opcional)</label>\n                                <input\n                                    name=\"plate\"\n                                    className=\"h-12 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-surface-dark px-4 font-medium outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all text-slate-900 dark:text-white uppercase\"\n                                    placeholder=\"XXX-123\"\n                                    value={formData.plate}\n                                    onChange={handleChange}\n                                />\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Section: Purchase Info */}\n                    <div className=\"space-y-4\">\n                        <h3 className=\"text-sm font-bold uppercase tracking-wider text-gray-400 border-b border-gray-200 dark:border-gray-800 pb-2\">Estimaciones Iniciales</h3>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div className=\"flex flex-col gap-1\">\n                                <label className=\"text-xs font-bold uppercase text-gray-500\">Fecha de Compra</label>\n                                <input\n                                    name=\"purchaseDate\"\n                                    type=\"date\"\n                                    required\n                                    className=\"h-12 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-surface-dark px-4 font-medium outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all text-slate-900 dark:text-white\"\n                                    value={formData.purchaseDate}\n                                    onChange={handleChange}\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                            <div className=\"flex flex-col gap-1\">\n                                <label className=\"text-xs font-bold uppercase text-gray-500\">Compra Moto (Estimado)</label>\n                                <div className=\"relative\">\n                                    <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold\">$</span>\n                                    <input\n                                        name=\"purchaseCostEstimated\"\n                                        type=\"number\"\n                                        inputMode=\"numeric\"\n                                        required\n                                        className=\"h-12 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-surface-dark pl-8 pr-4 font-mono font-bold outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all text-slate-900 dark:text-white\"\n                                        placeholder=\"0\"\n                                        value={formData.purchaseCostEstimated}\n                                        onChange={handleChange}\n                                    />\n                                </div>\n                            </div>\n\n                            <div className=\"flex flex-col gap-1\">\n                                <label className=\"text-xs font-bold uppercase text-gray-500\">Repuestos (Estimado)</label>\n                                <div className=\"relative\">\n                                    <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold\">$</span>\n                                    <input\n                                        name=\"partsCostEstimated\"\n                                        type=\"number\"\n                                        inputMode=\"numeric\"\n                                        className=\"h-12 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-surface-dark pl-8 pr-4 font-mono font-bold outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all text-slate-900 dark:text-white\"\n                                        placeholder=\"0\"\n                                        value={formData.partsCostEstimated}\n                                        onChange={handleChange}\n                                    />\n                                </div>\n                            </div>\n\n                            <div className=\"flex flex-col gap-1\">\n                                <label className=\"text-xs font-bold uppercase text-gray-500\">Mano de Obra (Estimado)</label>\n                                <div className=\"relative\">\n                                    <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold\">$</span>\n                                    <input\n                                        name=\"laborCostEstimated\"\n                                        type=\"number\"\n                                        inputMode=\"numeric\"\n                                        className=\"h-12 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-surface-dark pl-8 pr-4 font-mono font-bold outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all text-slate-900 dark:text-white\"\n                                        placeholder=\"0\"\n                                        value={formData.laborCostEstimated}\n                                        onChange={handleChange}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"h-4\"></div>\n\n                    <button\n                        type=\"submit\"\n                        disabled={submitting}\n                        className=\"w-full bg-primary hover:bg-primary-dark text-black font-bold h-14 rounded-xl shadow-lg shadow-primary/20 transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed font-display tracking-wide uppercase\"\n                    >\n                        {submitting ? 'Guardando...' : 'Crear Moto'}\n                    </button>\n\n                    <div className=\"h-10\"></div>\n                </form>\n            </div>\n        </main>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}